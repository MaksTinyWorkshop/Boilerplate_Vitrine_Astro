---
import { listDefaultLocaleSlugs, resolveDefaultLocaleRedirect } from "@lib/i18n/pages";

export async function getStaticPaths() {
  const pages = await listDefaultLocaleSlugs();

  return pages
    .filter(({ slug }) => Boolean(slug))
    .map(({ slug }) => ({
      params: { slug },
    }));
}

return Astro.redirect(
  await resolveDefaultLocaleRedirect(Astro.params.slug ?? ""),
  307,
);
---
